[![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fhaesoo9410&count_bg=%23EB8B10&title_bg=%23684327&icon=&icon_color=%23E7E7E7&title=VISIT&edge_flat=false)](https://github.com/raddaslul/dalk)
# 실시간 채팅 토론 플랫폼 DALKING
## 끝나지않는 토론은 멈춰!!✋ 덕킹에서 한판 붙자!

<img width="150" src="https://user-images.githubusercontent.com/73621658/161711654-dd92e728-7253-4d2f-b418-745cf0355ff5.png">

<b>공식 사이트</b> : https://debate-talk.com <br/>
FrontEnd GITHUB : https://github.com/jeonhaekang/dalk_debateTalk <br />
BackEnd GITHUB : https://github.com/raddaslul/dalk.git <br />
소개 영상 : <br />

# 🗂 프로젝트 소개

- 개발 기간 : 2022.02.25 ~ 2022.04.08
- 개발 언어 : Java
- 개발 프레임워크 : Spring Boot
- 배포 환경 : AWS EC2, S3, RDS(MySQL)
- 협업 툴 : Git / Notion / Figma / Slack
  <br />


<br />

# ✔ 핵심 기능

> ### 💬 밸런스 게임을 주제로 실시간 채팅

- 깻잎논쟁, 부먹or찍먹등 다양한 주제로 채팅방을 개설하세요!
- 채팅방에서 다른유저들과 함께 자신의 의견을 어필해보세요!
- 나만말하거나 상대방의 채팅을 랜덤으로 번역하는 등 다양한 아이템을 사용해서
  상대방의 어필을 방해해보세요!

  <br/>
> ### 🗳 단순 투표가 아닌 포인트를 걸고 투표

- 밸런스채팅에서 내의견을 말할 때 포인트를 걸고 투표를 할 수 있습니다.
- 채팅이 종료된 후 내가 투표한 주제가 승리했다면 상대방의 포인트와 내가 건 포인트에
  비례해서 더 많은 포인트를 획득할 수 있습니다.
- 이 주제의 승리가 확실하다면 포인트를 많이 걸어서 더 많은 포인트를 획득하세요!

  <br/>
> ### 🎰 다양한 재미적 요소(아이템 상점, 뽑기, 등급, 랭킹)

- 밸런스 게임을 이기기 위해 많은 아이템을 판매하고 있어요. (파파고, 채팅얼리기, 로꾸꺼 등)
- 토론에 져서 포인트가 없으신가요? 매일 갱신되는 뽑기를 통해 알포인트를 충전하세요.
- 토론에서 이긴 알포인트로 경험치를 구매해 등급을 올려보세요.
  TOP 1,2,3 등에게는 멋진 휘장이 부여 됩니다.

  <br/>

# 👥 팀 구성

|                                                        [김영민](https://github.com/raddaslul)                                                        |                                                         [신동석](https://github.com/dss1222)                                                          |                                                         [현지훈](https://github.com/hyeonjh)                                                          |                                                       [전해강](https://github.com/jeonhaekang)                                                        |                                                        [차민재](https://github.com/letminjae)                                                         |                                                                       박다혜                                                                        |                                                                       이규리                                                                        |
| :--------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/96935557/160993263-a421e956-69d1-4973-ab65-2b0369f3e093.jpg" alt="프로필 이미지" width="200px"/> | <img src="https://user-images.githubusercontent.com/96935557/160993261-1f741cea-7483-45bc-ba5b-358b94e88c1e.png" alt="프로필 이미지" width="200px" /> | <img src="https://user-images.githubusercontent.com/96935557/160993257-885ee21a-33b9-423b-aa84-deb2ac783bc5.jpg" alt="프로필 이미지" width="200px" /> | <img src="https://user-images.githubusercontent.com/73621658/161737028-01579377-e7e5-4da6-8e7e-87ba5f820b0a.png" alt="프로필 이미지" width="200px" /> | <img src="https://user-images.githubusercontent.com/96935557/160993266-97fde786-4d9a-44f8-9add-2930b5dc7947.png" alt="프로필 이미지" width="200px" /> | <img width="200px" alt="프로필 이미지" src="https://user-images.githubusercontent.com/96935557/160994847-0d364594-19e4-41ea-b0b3-449ddc3d52a6.png"> | <img width="200px" alt="프로필 이미지" src="https://user-images.githubusercontent.com/96935557/160994828-fee4f002-2576-4be3-9a39-42f3e6ec3495.png"> |
|                                                                      `Back-end`                                                                      |                                                                      `Back-end`                                                                       |                                                                      `Front-end`                                                                      |                                                                      `Front-end`                                                                      |                                                                      `Front-end`                                                                      |                                                                     `Designer`                                                                      |                                                                     `Designer`                                                                      |

# 🎥 데모

<details>
    <summary>펼치기</summary>

|                                                                토론방 채팅                                                                 |                                                                밸런스 투표                                                                 |                                                                아이템 사용                                                                 |
| :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/96935557/161021106-6b6ca8b6-c14d-4a1b-95a9-185fca9e95fc.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161022511-85b7ba71-68b1-41f8-9089-7fbb1422a636.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161027809-a2c18e4c-7336-4119-888f-332bf22c2ca1.gif" alt="demo" width="80%" /> |

<br/>

|                                                       카테고리 별 토론, 결과방 조회                                                        |                                                             토론, 결과방 검색                                                              |                                                                결과방 통계                                                                 |
| :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/96935557/161029832-13ad234e-45c5-444e-bfab-b6408ab7cc9c.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161034287-29677099-4849-4580-ad30-5982073fdb97.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161034297-4519036f-4cea-45a2-9420-8cb5ff3a7f43.gif" alt="demo" width="80%" /> |

<br/>

|                                                                 전체 랭킹                                                                  |                                                               알포인트 상점                                                                |                                                               알포인트 뽑기                                                                |
| :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/96935557/161111439-16be1036-1328-45a1-8ca5-07102f59a2a8.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161111417-04daff13-e4ce-4281-bff5-1941992756f5.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161707106-808eaa4b-a272-4c83-a2cd-4cc278860329.gif" alt="demo" width="80%" /> |

<br/>

|                                                                 등급 안내                                                                  |                                                               댓글 등록&삭제                                                               |                                                               댓글 찬성&반대                                                               |
| :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/96935557/161114764-a8dbe498-c572-4114-b3e1-39233948910e.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161114761-47ad8539-9527-43c2-8623-b8235d817517.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161114755-e673d71d-c320-44ae-8244-f82c3fe17960.gif" alt="demo" width="80%" /> |

<br/>

|                                                          유저, 토론, 결과방 신고                                                           |                                                                무한 스크롤                                                                 |                                                                  공유하기                                                                  |
| :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/96935557/161129182-92fc399b-4ec6-428f-88be-9cda60d22d89.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161129195-77e3cdd0-0e51-4f29-9037-8590cdc769b5.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161129191-b829da82-d1cd-4dfe-9af2-2278958ea866.gif" alt="demo" width="80%" /> |

<br/>

|                                                                   온보딩                                                                   |                                                               관리자 페이지                                                                |                                                                  토론안내                                                                  |
| :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/96935557/161707100-14033822-ecd8-4e65-86d9-74168180d107.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161707113-d1c4ba48-35b4-42ad-93f7-7c35b75def0f.gif" alt="demo" width="80%" /> | <img src="https://user-images.githubusercontent.com/96935557/161707079-1a3e499d-f3f8-4d7f-b4bf-cdbf8ecca800.gif" alt="demo" width="80%" /> |

</details>

<br />

# 🧩 아키텍쳐

![dalkArchitecture](https://user-images.githubusercontent.com/96935557/160998932-99d23bea-c77b-4cfb-9409-f6879eef7f4c.PNG)

<br />

# 🔨 기술 스택

 <div align="center">
 <br/>

|분류|기술|
| :-: |:- |
|IDE|<img src="https://img.shields.io/badge/IntelliJ IDEA-000000?style=for-the-badge&logo=IntelliJ IDEA&logoColor=white">|
|Language|<img src="https://img.shields.io/badge/JAVA-007396?style=for-the-badge&logo=java&logoColor=white">|
|Framework|<img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white"> <img src="https://img.shields.io/badge/Springboot-6DB33F?style=for-the-badge&logo=Springboot&logoColor=white">|
|Build Tool|<img src="https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white">|
|Security|<img src="https://img.shields.io/badge/JSON%20Web%20Tokens-000000.svg?style=for-the-badge&logo=JSON%20Web%20Tokens&logoColor=white"/>|
|DB|<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white">|
|Message Broker|<img src="https://img.shields.io/badge/redis-DC382D?style=for-the-badge&logo=redis&logoColor=white">|
|Image Storage|<img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white">|
|Server|<img src="https://img.shields.io/badge/aws-232F3E?style=for-the-badge&logo=AmazonAWS&logoColor=white"> <img src="https://img.shields.io/badge/NGINX-009639?style=for-the-badge&logo=NGINX&logoColor=white">|
|CI/CD|<img src="https://img.shields.io/badge/GitHub%20Actions-2088FF.svg?style=for-the-badge&logo=GitHub%20Actions&logoColor=white"/> <img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white"> <img src="https://img.shields.io/badge/Code%20Deploy-green?style=flat-square&logoColor=white"/>|
|VCS|<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"> |
|Socket| <img src="https://img.shields.io/badge/SOCKJS-blueviolet?style=flat-square&logoColor=white"/> <img src="https://img.shields.io/badge/STOMP-black?style=flat-square&logoColor=white"/>|
|Collaboration Tool| <img src="https://img.shields.io/badge/Notion-000000.svg?style=for-the-badge&logo=Notion&logoColor=white"/> |
<br />
  </div>

# ⛔️ 트러블 슈팅

## 1. N+1 문제
<details>
  <summary>펼치기</summary>
 
  <br/>

  > ### 1. 에러 현상
  <div align="center">
   <img src="https://raddaslul.s3.ap-northeast-2.amazonaws.com/image/n%2B1+%EB%AC%B8%EC%A0%9C.PNG"/>
  </div> <br/>
  
  * 페이징처리를 하여 한번로딩에 게시글을 5개씩 불러오는데 이 과정에서 Query가 
  한번에 여러개가 나가는 문제가 발생했다.

  * 로딩속도가 약 480ms로 어느정도 느린게 체감이 됨 

  <br/>
  
  > ### 2. 에러 해결 과정

  해당 에러는 JPA의 메서드커리를 사용하면서 발생했다. 
<div align="center">
    <img src="https://raddaslul.s3.ap-northeast-2.amazonaws.com/image/n%2B1+%ED%95%B4%EA%B2%B0.PNG"/>
  </div><br/>
  
   * 이를 해결하기 위해 로직 상 getter를 사용할 수 밖에 없는 entity에 외래키를 부여한 후,<br/>
 
   * 단방향으로 연관관계를 맺어 게시글 5개를 조회해도 쿼리가 한 번만 나갈 수 있게 개선하였습니다.<br/>
  
</details>
<br/>

## 2. subscribe시 비동기 문제
<details>
  <summary>펼치기</summary>
    

<br/>

> ### 1. 에러 현상
<div align="center">
    <img src="https://raddaslul.s3.ap-northeast-2.amazonaws.com/image/%EB%B9%84%EB%8F%99%EA%B8%B0+%EB%AC%B8%EC%A0%9C.png"/>
  </div><br/>
  
* client가 채팅방에 입장했는데 입장 메세지를 확인하지 못하는 버그가 있었습니다. <br/>
* 이 문제의 원인은 client에서 서버로 구독 요청을 보낼 때는 구독을 완료하고 요청을 보내는 것이 아니라 
단순히 구독을 하겠다고 요청을 한 것이기에 client의 컴퓨터가 서버보다 느릴 시 구독을 완료하기도 전에 
  백엔드에서 먼저 입장 메세지를 보내는 문제였습니다.

> ### 3. 에러 해결 과정

<div align="center">
    <img src="https://raddaslul.s3.ap-northeast-2.amazonaws.com/image/%EB%B9%84%EB%8F%99%EA%B8%B0+%ED%95%B4%EA%B2%B0.PNG"/>
  </div><br/>
<br/>

  * 이를 해결하기 위해 따로 api를 만들어서 해당 api로 client가 구독을 완료했을 시 요청을 보내게끔 수정하였습니다.

  </details>
  <br/>
  
## 3. 코드 리팩터링
<details>
  <summary>펼치기</summary>
<div align="center">
    <img src="https://raddaslul.s3.ap-northeast-2.amazonaws.com/image/%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81+%EB%AC%B8%EC%A0%9C.PNG"/>
  </div><br/>
<br/>
  
  * 서비스 단에서 모든 로직을 처리하였으며, 무분별한 switch문 사용으로 가독성이 떨어졌습니다.

  > ### 해결
  <div align="center">
    <img src="https://raddaslul.s3.ap-northeast-2.amazonaws.com/image/%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81+%ED%95%B4%EA%B2%B0.PNG"/>
  </div><br/>
<br/>
  
  * Domain Driven Design을 도입하여 무분별한 setter 사용을 지양하였으며, 유지보수적인 측면에서도
해당 코드에 어디에 위치하는지 손쉽게 찾을 수 있게 하였습니다. 그리고 아이템을 위해 사용했던 switch 
  문은 해당 아이템이 한 번 정해지면 변하지 않는 다는 특성을 이용하여  enum 타입으로 대체하였습니다

<br />
<br />
</details>

<br/>

# 👨‍👨‍👦‍👦 유저 피드백

>  ### 피드백 수집일자 : 2022년 3월 28일 ~ 2022년 4월 4일 <br />
>  ### 피드백 수 : 총 22개

<br />

<details>
  <summary>피드백 내용 확인</summary>

- 긍정적인 피드백
  - 채팅에서 논리로 이겨버리고 받은 포인트로 랩업해서 랭킹 1등했어요!
  - 행운뽑기 기능이 신박하고 도박요소가 있어서 재밌었습니다 ㅎㅎ 그리고 아이템 구매하는 창에서 하나씩 어떤 기능인지 설명해줘서 좋았어요 1조 분들 너무너무 고생하셨습니다.
  - DALK를 프로젝트를 준비하며, A가 좋을까 B가 더 나은 것은 아닐까. 가장 많이 고민하고 또 토론한 분들이 운영진 분들이시겠다는 생각이 들었습니다. 정말 수고 많으셨고, 앞으로 나아가실 길도 진심으로 응원하겠습니다. 모두 건강 잘 챙겨가면서 하시길 바라며.. 좋은 서비스 만들어주셔서 감사합니다🙆‍♀️
  - 아이디어 좋은거 같아요 사용자가 많아지면 더재밌게 채팅할 수있을 거같아요! 번창하시길 바랄게요!
    
    <br />

- 개선에 대한 피드백
    > 다양한 기능을 써보고 싶어도 어디에 어떤 기능이 있는지 모르겠어요. 
    
    - 사용자의 이용률과 경험만족도를 끌어올리기 위해 투표창 인식을 위한 UI 개선을 진행, <br />
    처음 방문한 사용자들을 위해 메인배너에 사용방법창으로 갈 수 있는 캐러셀을 추가

        |배너 캐러셀|투표창 초기 펼침|
        |:-:|:-:|
        |<img src ="https://user-images.githubusercontent.com/96935557/161725645-2e16ebae-b03d-4bf4-aeed-06603f7097be.png">|<img src ="https://user-images.githubusercontent.com/96935557/161725952-1705eddd-21d9-4d5b-a32d-960f4ee81f6d.png">|


        <br />
        <br />
    > 아이폰 모바일 화면은 뷰가 깨져 보여요.
    
    -  리사이즈 Event를 통해 화면크기를 실시간 계산 후 적용하는 과정을 통해서 모든 모바일 뷰 화면을 깨짐없이 개선 <br />

        ```Javascript
        const MobileFrame = ({ children }) => {
          const handleResize = () => {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty("--vh", `${vh}px`);
          };

          useEffect(() => {
            handleResize();
            window.addEventListener("resize", handleResize);

            return () => window.removeEventListener("resize", handleResize);
          }, []);

          return (
            <MobileContainer>
            <MobileWrap id="globalPortal">
                <MobileContent>{children}</MobileContent>
            </MobileWrap>
            </MobileContainer>
          );
        };
        ```

        <br />
    > 채팅방이 너무 좁아서 한눈에 토론내용을 보기 어려워요.
    - 헤더를 통합하여 채팅창을 넓게 만들어 사용자들의 불편사항 개선

        |개선 전|개선 후|
        |:-:|:-:|
        |<img src="https://user-images.githubusercontent.com/96935557/161725088-df287b72-2cd5-4724-842d-22b6ed015591.png">|<img src="https://user-images.githubusercontent.com/96935557/161725389-8c3cc822-1549-4bc2-b8bd-dfd474b7e2cf.png">|
</details>

<br />

# 🤝 후기 및 회고

<code>김영민</code> <br />
처음 시작할 때는 막연했지만 팀원들과 함께 프로젝트를 하나하나 구현해 나가면서 신기하기도 하고 <br />
무엇보다 재미있게 개발을 할 수 있었습니다.

<code>신동석</code> <br />
팀원들의 꼼꼼한 코드리뷰덕에 실전프로젝트 기간동안 많이 배웠습니다. <br />
이 기간동안 코드를 작성하는것과 협업을하는것에 대해 재미를 느껴서 그런지 빨리 다음 프로젝트를 진행하고 싶습니다!! <br />
아무나 협업 요청주세요! 님만 오면 프로젝트 고!

<code>현지훈</code> <br />
좋은 팀원들 덕분에 개발실력이 굉장히 성장했다고 생각합니다.. <br />
프로젝트 시작할 때는 어려움이 많았지만, 7주간의 프로젝트가 끝나고 혼자서 웹사이트 하나쯤은 만들수 있는 주니어 개발자가 된 것 같습니다. <br />
실전 프로젝트를 통해 프론트엔드, 백엔드, 디자이너와의 협업을 통해 프로젝트가 완성되는 경험을 할 수 있었고, <br />
실제 서비스를 런칭 하면서 사용자 피드백 및 오류를 해결하는 방법을 배울 수 있었습니다.

---
